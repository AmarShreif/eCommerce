<section class="bg-gray-200 py-4">
  <div class="container grid items-start sm:grid-cols-12 gap-5">
    <div class="col-span-8 p-4 rounded-lg shadow">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-2">
          <h2 class="text-3xl">Cart</h2>
          <span class="text-blue-950 text-xl"
            ><sub>{{ cartDetails?.products?.length }} Item</sub></span
          >
        </div>
        <div>
          <h2
            (click)="clearCart()"
            class="btn text-sm bg-red-700 hover:opacity-90 transition-opacity"
          >
            Clear Cart
          </h2>
        </div>
      </div>
      @for (item of cartDetails?.products; track item._id) {
      <div class="grid sm:grid-cols-12 bg-white p-2 my-2 rounded shadow border-b">
        <div class="grid col-span-1">
          <div class="flex flex-col items-center gap-3">
            <img [src]="item.product.imageCover" class="w-full" [alt]="item.product.title" />
            <button
              (click)="removeItem(item.product._id)"
              class="cursor-pointer hover:opacity-90 transition"
            >
              <i class="fas fa-trash-can text-blue-900 text-xl"></i>
            </button>
          </div>
        </div>
        <div class="col-span-11">
          <div class="mt-3 flex justify-between">
            <div class="w-[85%] ms-3">
              <h3>{{ item.product.title }}</h3>
              <p class="text-sm text-gray-400">
                Premium-quality, soft and breathable fabric with a modern stylish design, durable
                stitching, exceptional comfort and flexibility, offering a perfect fit for everyday
                wear, outings, and all occasions
              </p>
            </div>
            <span class="me-3">{{ item.price * item.count | currency : 'GBP' }} </span>
          </div>
          <div class="flex justify-end items-center">
            <div class="flex items-center gap-3 me-3">
              <button
                (click)="updateItem(item.product._id, item.count - 1)"
                class="bg-blue-900 text-white cursor-pointer w-8 h-8 flex items-center justify-center rounded-md hover:opacity-90 transition"
              >
                <i class="fas fa-minus"></i>
              </button>

              <span class="min-w-6 text-center">{{ item.count }}</span>

              <button
                (click)="updateItem(item.product._id, item.count + 1)"
                class="bg-blue-900 text-white cursor-pointer w-8 h-8 flex items-center justify-center rounded-md hover:opacity-90 transition"
              >
                <i class="fas fa-plus"></i>
              </button>
            </div>
          </div>
        </div>
        <div></div>
      </div>
      }
    </div>
    <div class="col-span-4 bg-white p-4 rounded-lg shadow">
      <h2 class="text-2xl">Order Summary</h2>
      <div class="flex justify-between items-center my-4">
        <h3>Total Price</h3>
        <h4>{{ cartDetails?.totalCartPrice | currency : 'GBP' }}</h4>
      </div>
      <button [routerLink]="['/checkout', cartDetails?._id]" class="btn">
        Proceed To CheckOut
      </button>
    </div>
  </div>
</section>
